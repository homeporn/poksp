# Poker Stack — Telegram Mini App Backend

Веб-приложение для учета игроков и их финансовых результатов, готовое к использованию в мини-приложении Telegram. Сервис позволяет добавлять игроков, фиксировать бай-ины, выигрыши и проигрыши, а также отслеживать баланс каждого участника.

## Возможности

- Создание базы игроков с указанием имени и Telegram-ника.
- Добавление операций трех типов: бай-ин, выигрыш, проигрыш.
- Автоматический подсчет суммарных бай-инов, выигрышей, проигрышей и текущего баланса.
- Отображение истории всех операций.

## Запуск локально

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\\Scripts\\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

После запуска приложение будет доступно по адресу http://127.0.0.1:8000.

## Деплой как мини-приложение Telegram

1. Разверните приложение на публично доступном хостинге (например, Render, Railway, Fly.io).
2. Укажите HTTPS-URL сервиса в настройках BotFather: `Menu Button` → `Configure` → `Add Web App`.
3. Настройте разрешения в BotFather (инлайн режим опционально).
4. Поделитесь мини-приложением с пользователями. Интерфейс адаптирован под мобильные устройства благодаря адаптивной верстке.

## Тестирование

```bash
pytest
```

## Структура проекта

```
app/
  crud.py            # функции работы с БД
  database.py        # конфигурация SQLModel и подключение
  main.py            # точка входа FastAPI
  models.py          # модели игроков и транзакций
  templates/index.html
  static/styles.css
```

## Переменные окружения

По умолчанию используется SQLite база `players.db` в корне проекта. Для смены базы данных обновите `DATABASE_URL` в `app/database.py`.
